(this.webpackJsonpnametagapp=this.webpackJsonpnametagapp||[]).push([[2],{64:function(e,t,a){},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,r,c=a(76),o=a.n(c);a(79),a(80);function s(e,t){return new Promise((function(a,n){o.a.auth().setPersistence(o.a.auth.Auth.Persistence.NONE).then((function(){return o.a.auth().signInWithEmailAndPassword(e,t)})).then((function(){a(!0)})).catch((function(e){var t=e.code,a=e.message;n({code:t,msg:a})}))}))}function i(){return new Promise((function(e,t){o.a.auth().onAuthStateChanged((function(t){t?(console.log("checkAuth() passed with user: "+t.email),e(t.email)):console.log("checkAuth() failed: no credentials.")}))}))}function u(e){if("undefined"==typeof o.a.apps[0]){o.a.initializeApp({apiKey:"AIzaSyA1uPdDnmLSWqkuEkFlGH5YF7UvxvszceU",authDomain:"nametags-4019a.firebaseapp.com",projectId:"nametags-4019a"});var t=o.a.firestore();n=t.collection("names");var a=Math.sqrt(4356);a="iamanonymous"+a,s("anonymous@deervalley.com",a+="6")}if("auth"===e.mode)return new Promise((function(t,a){s(e.authUser,e.authPass).then((function(){i().then((function(e){t(e)})).catch((function(e){}))})).catch((function(e){a(e)}))}));if("read_all"===e.mode)return r=[],new Promise((function(e,t){i().then((function(){n.where("datefinished","==",0).get().then((function(t){t.forEach((function(e){-1===r.findIndex((function(t){return t.id===e.id}))&&r.push({id:e.id,data:e.data()})})),e(r)}))}))}));if("search_for"===e.mode){var c=[];return new Promise((function(t,a){i().then((function(){n.where("namearray","array-contains-any",[e.searchForString]).get().then((function(e){e.forEach((function(e){c.push({id:e.id,data:e.data()})}))})).then((function(){n.where("requestorarray","array-contains-any",[e.searchForString]).get().then((function(e){e.forEach((function(e){-1===c.findIndex((function(t){return t.id===e.id}))&&c.push({id:e.id,data:e.data()})})),t(c)}))}))}))}))}if("new_entry"===e.mode)return r=[],new Promise((function(t,a){i().then((function(){e.writeData.forEach((function(e,a){var r=e.name,c=e.requestor,o=r.toLowerCase(),s=c.toLowerCase(),i=o.split(" "),u=s.split(" ");i.unshift(o),u.unshift(s);var d=(new Date).getTime();5===e.color?n.add({name:r,namearray:i,color:5,attachment:e.attachment,signcolor:e.signColor,signquantity:e.signQuantity,height:e.height,width:e.width,thickness:e.thickness,requestor:c,requestorarray:u,comments:e.comments,daterequest:d,datefinished:0}).then((function(){t(!0)})):n.add({name:r,namearray:i,color:e.color,titlecity:e.secondLine,thirdline:e.thirdLine,requestor:c,requestorarray:u,comments:e.comments,daterequest:d,datefinished:0,quantity:e.quantity}).then((function(){t(!0)}))}))}))}));if("auth"===e.mode);else{if("update_entry"===e.mode)return new Promise((function(t,a){var r;if("done"===e.type){var c=new Date;r=c.getTime()}else"notdone"===e.type&&(r=0);e.docIdArray.forEach((function(e,a){n.doc(e).update({datefinished:r}).then((function(){console.log("Document successfully written on update_entry()!"),t(!0)})).catch((function(e){console.error("Error writing document on update_entry(): ",e)}))}))}));console.log("dbUtility() was called using a non supported utilityObj mode."),console.log("supported modes are 'read_all', 'search_for', 'new_entry', 'update_entry', or 'auth'."),console.log(e.mode)}}},81:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(66),r=a(0),c=a.n(r),o=a(60),s=a(59),i=a(86),u=a(85),d=a(56),l=a(100),m=a(105),h=a(16),f=a(65),g=(a(39),a(64),a(81),(new Date).getTime()),y=Object(r.lazy)((function(){return a.e(11).then(a.bind(null,62))})),p=c.a.createElement(o.a,{variant:"danger",animation:"border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")),E=function(e){var t={};if(0===e)return t.text="Still Working...",t.class="status-yellow",t;var a=(g-e)/864e4;return a=Math.round(a)/10,t.text="Finished "+a+" Days Ago!",t.class="status-green",t};t.default=function(e){var t=Object(r.useState)([{id:0,data:{color:"",comments:"",datefinished:0,daterequest:0,reqDaysAgo:0,attachment:"",signColor:"White / Green",signQuantity:1,height:1,width:1,thickness:""}}]),a=Object(n.a)(t,2),b=a[0],w=a[1],j=Object(r.useState)(!1),O=Object(n.a)(j,2),v=O[0],S=O[1],N=Object(r.useState)(!1),x=Object(n.a)(N,2),A=x[0],q=x[1],_=Object(r.useState)(""),k=Object(n.a)(_,2),C=k[0],D=k[1],P=Object(r.useState)(""),I=Object(n.a)(P,2),T=I[0],L=I[1],M=Object(r.useState)("STATUS for UNFINISHED TAGS:"),F=Object(n.a)(M,2),R=F[0],U=F[1],z=Object(r.useState)("Search Already Ordered Tags"),W=Object(n.a)(z,2),G=W[0],K=W[1],Q=function(){S(!1),""===C?Object(f.a)({mode:"read_all"}).then((function(t){w(t),0===t.length&&q(!0),S(!0),e.setDataRowAdmin(t)})):(U(p),Object(f.a)({mode:"read_all"}).then((function(t){e.setDataRowAdmin(t)})).then((function(){Object(f.a)({mode:"search_for",searchForString:C}).then((function(e){w(e)})).then((function(){S(!0),U("Results for: "+C)}))})))};return Object(r.useEffect)((function(){Object(f.a)({mode:"read_all"}).then((function(e){w(e),0===e.length&&q(!0),S(!0)}))}),[]),Object(r.useEffect)((function(){Object(f.a)({mode:"read_all"}).then((function(e){w(e),0===e.length&&q(!0),S(!0)}))}),[e.dataRowAdmin]),Object(r.useEffect)((function(){e.adminMode&&(U("Edit Individual Tag Status"),K("Search for Specific Tags"),L("px-0"))}),[e.adminMode]),Object(r.useEffect)((function(){}),[b]),c.a.createElement(s.a,{className:T},c.a.createElement(i.a,{className:"justify-content-between mt-1 nav-h4-bar-bg print-hide"},!e.adminMode&&c.a.createElement(u.a,{xs:"auto",className:"p-0"},c.a.createElement(h.b,{to:"/"},c.a.createElement(d.a,null,"BACK"))),c.a.createElement(u.a,{xs:"auto"},c.a.createElement("h4",{className:"nav-h4-bar"},R)),c.a.createElement(u.a,{xs:"auto",className:"p-0"},c.a.createElement(l.a,{id:"status-search-bar"},c.a.createElement(m.a,{placeholder:G,"aria-label":"Search","aria-describedby":"basic-addon1",onChange:function(e){var t=e.target.value;t=t.toLowerCase(),D(t)},onKeyPress:function(e){"Enter"===e.key&&(""===C?(U("Edit Individual Tag Status"),Object(f.a)({mode:"read_all"}).then((function(e){w(e),0===e.length&&q(!0),S(!0)}))):(U(p),Object(f.a)({mode:"search_for",searchForString:C}).then((function(e){w(e),U("Results for: "+C)}))))}})))),!v&&c.a.createElement(i.a,null,c.a.createElement(o.a,{variant:"danger",animation:"border",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))),A&&!e.adminMode&&c.a.createElement(i.a,{className:"justify-content-center mt-2"},c.a.createElement("h5",{className:"green-text mt-2"},"All tags in the system are done.")),v&&b.map((function(t,a){return c.a.createElement(i.a,{className:"mt-1 justify-content-between status-row",key:"status-"+t.id},e.adminMode&&c.a.createElement(u.a,{xs:1,className:"px-0"},c.a.createElement(i.a,{className:"justify-content-center mt-1"},c.a.createElement(u.a,{xs:"auto"},c.a.createElement(d.a,{variant:"success",className:"admin-change-status-button",disabled:"status-green"===E(t.data.datefinished).class,onClick:function(){var e=[];e.push(t.id),Object(f.a)({mode:"update_entry",type:"done",docIdArray:e}).then((function(){Q()}))}},"\u2714"))),c.a.createElement(i.a,{className:"justify-content-center mt-1"},c.a.createElement(u.a,{xs:"auto"},c.a.createElement(d.a,{variant:"warning",className:"admin-change-status-button",disabled:"status-yellow"===E(t.data.datefinished).class,onClick:function(){var e=[];e.push(t.id),Object(f.a)({mode:"update_entry",type:"notdone",docIdArray:e}).then((function(){Q()}))}},"\u27f2")))),c.a.createElement(u.a,{xs:e.adminMode?5:6,className:"px-0"},c.a.createElement(r.Suspense,{fallback:p},5!==t.data.color&&c.a.createElement(y,{data:{name:t.data.name,secondLine:t.data.titlecity,thirdLine:t.data.thirdline,colorCode:t.data.color}}),5===t.data.color&&c.a.createElement(y,{data:{name:t.data.name,colorCode:5,signColor:t.data.signcolor,attachment:t.data.attachment,height:t.data.height,width:t.data.width}}))),c.a.createElement(u.a,{xs:4,className:"px-0"},c.a.createElement(i.a,null,c.a.createElement("p",{className:"status-b-col-text"},"Requestor: ",t.data.requestor)),c.a.createElement(i.a,null,c.a.createElement("p",{className:"status-b-col-text"},"Requested: ",function(e){var t=(g-e)/864e4;return t=Math.round(t)/10}(t.data.daterequest)," Days Ago")),c.a.createElement(i.a,null,5!==t.data.color&&c.a.createElement("p",{className:"status-b-col-text"},"Quantity: ",t.data.quantity)),c.a.createElement(i.a,null,c.a.createElement("p",{className:"status-b-col-text"},"Comments: ",t.data.comments))),c.a.createElement(u.a,{xs:2,className:E(t.data.datefinished).class},c.a.createElement("p",null,"STATUS: ",E(t.data.datefinished).text)))})))}}}]);
//# sourceMappingURL=2.7db96b7a.chunk.js.map