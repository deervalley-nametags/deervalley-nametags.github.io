(this.webpackJsonpnametagapp=this.webpackJsonpnametagapp||[]).push([[12],{64:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var n,c,r=a(68),s=a.n(r);a(69),a(70);function o(e,t){return new Promise((function(a,n){s.a.auth().setPersistence(s.a.auth.Auth.Persistence.NONE).then((function(){return s.a.auth().signInWithEmailAndPassword(e,t)})).then((function(){a(!0)})).catch((function(e){var t=e.code,a=e.message;n({code:t,msg:a})}))}))}function i(){return new Promise((function(e,t){s.a.auth().onAuthStateChanged((function(t){t?(console.log("checkAuth() passed with user: "+t.email),e(t.email)):console.log("checkAuth() failed: no credentials.")}))}))}function u(e){if("undefined"==typeof s.a.apps[0]){s.a.initializeApp({apiKey:"AIzaSyA1uPdDnmLSWqkuEkFlGH5YF7UvxvszceU",authDomain:"nametags-4019a.firebaseapp.com",projectId:"nametags-4019a"});var t=s.a.firestore();n=t.collection("names");var a=Math.sqrt(4356);a="iamanonymous"+a,o("anonymous@deervalley.com",a+="6")}if("auth"===e.mode)return new Promise((function(t,a){o(e.authUser,e.authPass).then((function(){i().then((function(e){t(e)})).catch((function(e){}))})).catch((function(e){a(e)}))}));if("read_all"===e.mode)return c=[],new Promise((function(e,t){i().then((function(){n.where("datefinished","==",0).get().then((function(t){t.forEach((function(e){-1===c.findIndex((function(t){return t.id===e.id}))&&c.push({id:e.id,data:e.data()})})),e(c)}))}))}));if("search_for"===e.mode){var r=[];return new Promise((function(t,a){i().then((function(){n.where("namearray","array-contains-any",[e.searchForString]).get().then((function(e){e.forEach((function(e){r.push({id:e.id,data:e.data()})}))})).then((function(){n.where("requestorarray","array-contains-any",[e.searchForString]).get().then((function(e){e.forEach((function(e){-1===r.findIndex((function(t){return t.id===e.id}))&&r.push({id:e.id,data:e.data()})})),t(r)}))}))}))}))}if("new_entry"===e.mode)return c=[],new Promise((function(t,a){i().then((function(){e.writeData.forEach((function(e,a){var c=e.name,r=e.requestor,s=c.toLowerCase(),o=r.toLowerCase(),i=s.split(" "),u=o.split(" ");i.unshift(s),u.unshift(o);var d=(new Date).getTime();5===e.color?n.add({name:c,namearray:i,color:5,attachment:e.attachment,signcolor:e.signColor,signquantity:e.signQuantity,height:e.height,width:e.width,thickness:e.thickness,requestor:r,requestorarray:u,comments:e.comments,daterequest:d,datefinished:0}).then((function(){t(!0)})):n.add({name:c,namearray:i,color:e.color,titlecity:e.secondLine,thirdline:e.thirdLine,requestor:r,requestorarray:u,comments:e.comments,daterequest:d,datefinished:0,quantity:e.quantity}).then((function(){t(!0)}))}))}))}));if("auth"===e.mode);else{if("update_entry"===e.mode)return new Promise((function(t,a){var c;if("done"===e.type){var r=new Date;c=r.getTime()}else"notdone"===e.type?c=0:"duplicate"===e.type&&(c=-1);e.docIdArray.forEach((function(e,a){n.doc(e).update({datefinished:c}).then((function(){console.log("Document successfully written on update_entry()!"),t(!0)})).catch((function(e){console.error("Error writing document on update_entry(): ",e)}))}))}));console.log("dbUtility() was called using a non supported utilityObj mode."),console.log("supported modes are 'read_all', 'search_for', 'new_entry', 'update_entry', or 'auth'."),console.log(e.mode)}}},72:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var n=a(67),c=a(0),r=a.n(c),s=a(60),o=a(59),i=a(87),u=a(86),d=a(56),l=a(100),m=a(105),h=a(16),f=a(64),g=(a(39),a(65),a(72),Object(c.lazy)((function(){return a.e(13).then(a.bind(null,63))}))),y=r.a.createElement(s.a,{variant:"danger",animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),p=function(e){var t={};if(0===e)return t.text="Still Working...",t.class="status-yellow",t;if(-1===e)return t.text="Marked as Duplicate",t.class="status-red",t;var a=(Date.now()-e)/864e4;return a=Math.round(a)/10,t.text="Finished "+a+" Days Ago!",t.class="status-green",t};t.default=function(e){var t=Object(c.useState)([{id:0,data:{color:"",comments:"",datefinished:0,daterequest:0,reqDaysAgo:0,attachment:"",signColor:"White / Green",signQuantity:1,height:1,width:1,thickness:""}}]),a=Object(n.a)(t,2),E=a[0],b=a[1],w=Object(c.useState)(!1),j=Object(n.a)(w,2),O=j[0],v=j[1],N=Object(c.useState)(!1),S=Object(n.a)(N,2),x=S[0],A=S[1],q=Object(c.useState)(""),_=Object(n.a)(q,2),k=_[0],C=_[1],D=Object(c.useState)(""),I=Object(n.a)(D,2),P=I[0],T=I[1],L=Object(c.useState)("STATUS for UNFINISHED TAGS:"),M=Object(n.a)(L,2),F=M[0],R=M[1],U=Object(c.useState)("Search Already Ordered Tags"),z=Object(n.a)(U,2),W=z[0],G=z[1],K=function(){v(!1),""===k?Object(f.a)({mode:"read_all"}).then((function(t){b(t),0===t.length&&A(!0),v(!0),e.setDataRowAdmin(t)})):(R(y),Object(f.a)({mode:"read_all"}).then((function(t){e.setDataRowAdmin(t)})).then((function(){Object(f.a)({mode:"search_for",searchForString:k}).then((function(e){b(e)})).then((function(){v(!0),R("Results for: "+k)}))})))};return Object(c.useEffect)((function(){Object(f.a)({mode:"read_all"}).then((function(e){b(e),0===e.length&&A(!0),v(!0)}))}),[]),Object(c.useEffect)((function(){Object(f.a)({mode:"read_all"}).then((function(e){b(e),0===e.length&&A(!0),v(!0)}))}),[e.dataRowAdmin]),Object(c.useEffect)((function(){e.adminMode&&(R("Edit Individual Tag Status"),G("Search for Specific Tags"),T("px-0"))}),[e.adminMode]),Object(c.useEffect)((function(){}),[E]),r.a.createElement(o.a,{className:P},r.a.createElement(i.a,{className:"justify-content-between mt-1 nav-h4-bar-bg print-hide"},!e.adminMode&&r.a.createElement(u.a,{xs:"auto",className:"p-0"},r.a.createElement(h.b,{to:"/"},r.a.createElement(d.a,null,"BACK"))),r.a.createElement(u.a,{xs:"auto"},r.a.createElement("h4",{className:"nav-h4-bar"},F)),r.a.createElement(u.a,{xs:"auto",className:"p-0"},r.a.createElement(l.a,{id:"status-search-bar"},r.a.createElement(m.a,{placeholder:W,"aria-label":"Search","aria-describedby":"basic-addon1",id:"status-search-bar-inner",onChange:function(e){var t=e.target.value;t=t.toLowerCase(),C(t)},onKeyPress:function(e){"Enter"===e.key&&(""===k?(R("Edit Individual Tag Status"),Object(f.a)({mode:"read_all"}).then((function(e){b(e),0===e.length&&A(!0),v(!0)}))):(R(y),Object(f.a)({mode:"search_for",searchForString:k}).then((function(e){console.log(e),b(e),R("Results for: "+k)}))))}})))),!O&&r.a.createElement(i.a,null,r.a.createElement(s.a,{variant:"danger",animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))),x&&!e.adminMode&&r.a.createElement(i.a,{className:"justify-content-center mt-2"},r.a.createElement("h5",{className:"green-text mt-2"},"All tags in the system are done.")),O&&E.map((function(t,a){return r.a.createElement(i.a,{className:"mt-1 justify-content-between status-row",key:"status-"+t.id},e.adminMode&&r.a.createElement(u.a,{xs:12,md:1,className:"px-0"},r.a.createElement(i.a,{className:"justify-content-center mt-1"},r.a.createElement(u.a,{xs:"auto"},r.a.createElement(d.a,{variant:"success",className:"admin-change-status-button",disabled:"status-green"===p(t.data.datefinished).class,onClick:function(){var e=[];e.push(t.id),Object(f.a)({mode:"update_entry",type:"done",docIdArray:e}).then((function(){K()}))}},"\u2714"))),r.a.createElement(i.a,{className:"justify-content-center mt-1"},r.a.createElement(u.a,{xs:"auto"},r.a.createElement(d.a,{variant:"danger",className:"admin-change-status-button",disabled:"status-green"===p(t.data.datefinished).class,onClick:function(){var e=[];e.push(t.id),Object(f.a)({mode:"update_entry",type:"duplicate",docIdArray:e}).then((function(){K()}))}},"\u2398"))),r.a.createElement(i.a,{className:"justify-content-center mt-1"},r.a.createElement(u.a,{xs:"auto"},r.a.createElement(d.a,{variant:"warning",className:"admin-change-status-button",disabled:"status-yellow"===p(t.data.datefinished).class,onClick:function(){var e=[];e.push(t.id),Object(f.a)({mode:"update_entry",type:"notdone",docIdArray:e}).then((function(){K()}))}},"\u27f2")))),r.a.createElement(u.a,{xs:12,md:e.adminMode?5:6,className:"px-0"},r.a.createElement(c.Suspense,{fallback:y},5!==t.data.color&&r.a.createElement(g,{data:{name:t.data.name,secondLine:t.data.titlecity,thirdLine:t.data.thirdline,colorCode:t.data.color}}),5===t.data.color&&r.a.createElement(g,{data:{name:t.data.name,colorCode:5,signColor:t.data.signcolor,attachment:t.data.attachment,height:t.data.height,width:t.data.width}}))),r.a.createElement(u.a,{xs:12,md:4,className:"px-0"},r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement("p",{className:"status-b-col-text"},"Requestor: ",t.data.requestor))),r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement("p",{className:"status-b-col-text"},"Requested: ",function(e){var t=(Date.now()-e)/864e4;return Math.floor(t)/10}(t.data.daterequest)," Days Ago"))),r.a.createElement(i.a,null,r.a.createElement(u.a,null,5!==t.data.color&&r.a.createElement("p",{className:"status-b-col-text"},"Quantity: ",t.data.quantity))),r.a.createElement(i.a,null,r.a.createElement(u.a,null,r.a.createElement("p",{className:"status-b-col-text"},"Comments: ",t.data.comments)))),r.a.createElement(u.a,{xs:12,md:2,className:p(t.data.datefinished).class},r.a.createElement("p",null,"STATUS: ",p(t.data.datefinished).text)))})))}}}]);
//# sourceMappingURL=12.e14fbc5d.chunk.js.map